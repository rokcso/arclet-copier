# Arclet Copier 扩展测试用例文档

## 📋 测试概述

本文档涵盖了Arclet Copier Chrome扩展的完整测试用例，包括功能测试、兼容性测试、边界条件测试等。

### 🎯 测试目标
- 验证所有核心功能正常工作
- 确保模块化重构没有引入bug
- 验证国际化和主题切换功能
- 测试边界条件和错误处理

---

## 🚀 预备测试

### 环境准备
- [ ] Chrome浏览器（建议最新版本）
- [ ] 开启开发者模式
- [ ] 清空浏览器通知权限缓存
- [ ] 准备测试页面（包含各种URL类型）

### 扩展安装验证
- [ ] **TC001**: 扩展成功加载，无错误信息
- [ ] **TC002**: 扩展图标正确显示在工具栏
- [ ] **TC003**: 右键菜单无扩展相关错误
- [ ] **TC004**: 控制台无JavaScript错误

---

## 🔧 核心功能测试

### 1. URL复制功能

#### 1.1 基础复制测试
- [ ] **TC101**: 在普通网页点击"Copy URL"按钮
  - **期望**: URL成功复制到剪贴板，显示成功通知
  - **验证**: 粘贴检查复制内容

- [ ] **TC102**: 在HTTPS网页测试复制
  - **期望**: 完整URL包含协议被复制

- [ ] **TC103**: 在包含中文路径的URL测试
  - **期望**: 中文字符正确编码并复制

#### 1.2 特殊页面测试
- [ ] **TC104**: 在chrome://扩展页面测试
  - **页面**: chrome://extensions/
  - **期望**: 显示适当错误信息或降级处理

- [ ] **TC105**: 在chrome-extension://页面测试
  - **期望**: 正确处理扩展内部页面

- [ ] **TC106**: 在about:blank页面测试
  - **期望**: 显示"无URL"错误信息

#### 1.3 URL清理功能测试

**测试URL示例**:
```
https://example.com/page?utm_source=google&utm_medium=cpc&page=1&id=123&fbclid=abc123&search=test
```

- [ ] **TC107**: URL清理 - 关闭模式
  - **设置**: 选择"Off"
  - **期望**: 保留所有参数
  - **结果**: `https://example.com/page?utm_source=google&utm_medium=cpc&page=1&id=123&fbclid=abc123&search=test`

- [ ] **TC108**: URL清理 - 智能模式
  - **设置**: 选择"Smart"  
  - **期望**: 移除跟踪参数，保留功能参数
  - **结果**: `https://example.com/page?page=1&id=123&search=test`

- [ ] **TC109**: URL清理 - 激进模式
  - **设置**: 选择"All"
  - **期望**: 移除所有查询参数
  - **结果**: `https://example.com/page`

### 2. Markdown链接复制

- [ ] **TC201**: 复制Markdown格式链接
  - **操作**: 点击"Copy as Markdown"按钮
  - **期望**: 格式为`[页面标题](URL)`

- [ ] **TC202**: 页面无标题时的Markdown复制
  - **页面**: 无title标签的页面
  - **期望**: 使用hostname作为标题

- [ ] **TC203**: 特殊字符标题的Markdown复制
  - **页面**: 标题包含[]()等特殊字符
  - **期望**: 正确转义或处理特殊字符

### 3. 二维码功能

- [ ] **TC301**: 生成二维码
  - **操作**: 点击"Generate QR Code"按钮
  - **期望**: 弹出模态框显示二维码

- [ ] **TC302**: 二维码内容验证
  - **操作**: 用手机扫描生成的二维码
  - **期望**: 扫描结果与当前URL一致（应用URL清理设置）

- [ ] **TC303**: 关闭二维码模态框
  - **操作**: 点击关闭按钮/ESC键/遮罩层
  - **期望**: 模态框正确关闭

- [ ] **TC304**: 主题适配测试
  - **操作**: 切换深色主题后生成二维码
  - **期望**: 二维码颜色适配当前主题

### 4. 快捷键功能

- [ ] **TC401**: 默认快捷键测试
  - **Windows**: `Ctrl+Shift+C`
  - **Mac**: `Cmd+Shift+C`
  - **期望**: 直接复制URL，显示通知

- [ ] **TC402**: 快捷键与静默复制格式联动
  - **设置**: 静默复制格式为"Markdown"
  - **操作**: 使用快捷键
  - **期望**: 复制Markdown格式链接

---

## ⚙️ 设置功能测试

### 1. 静默复制格式

- [ ] **TC501**: 设置为URL格式
  - **操作**: 选择"URL"格式，使用快捷键复制
  - **期望**: 复制纯URL

- [ ] **TC502**: 设置为Markdown格式  
  - **操作**: 选择"Markdown"格式，使用快捷键复制
  - **期望**: 复制Markdown链接格式

### 2. 主题切换

- [ ] **TC601**: 跟随系统主题
  - **设置**: 选择"Follow System"
  - **操作**: 更改系统主题
  - **期望**: 扩展主题自动跟随系统

- [ ] **TC602**: 浅色主题
  - **设置**: 选择"Light"
  - **期望**: 界面显示浅色主题

- [ ] **TC603**: 深色主题
  - **设置**: 选择"Dark"  
  - **期望**: 界面显示深色主题

### 3. 语言切换

- [ ] **TC701**: 切换到英文
  - **操作**: 选择"English"
  - **期望**: 界面文字变为英文，重新初始化正确

- [ ] **TC702**: 切换到中文
  - **操作**: 选择"简体中文"
  - **期望**: 界面文字变为中文

- [ ] **TC703**: 语言设置持久化
  - **操作**: 切换语言后关闭popup再打开
  - **期望**: 保持选择的语言设置

---

## 📱 用户体验测试

### 1. 界面响应

- [ ] **TC801**: popup打开速度
  - **期望**: popup在300ms内打开并显示内容

- [ ] **TC802**: 按钮交互反馈
  - **期望**: 所有按钮有视觉反馈效果

- [ ] **TC803**: 设置变更即时反馈
  - **操作**: 更改任何设置
  - **期望**: 显示确认通知

### 2. 通知系统

- [ ] **TC901**: 成功复制通知
  - **期望**: 显示系统通知和popup内通知

- [ ] **TC902**: 通知内容正确性
  - **期望**: 通知内容与实际操作一致

- [ ] **TC903**: 通知图标显示
  - **期望**: 通知包含扩展图标

### 3. 错误处理

- [ ] **TC1001**: 无网络连接时
  - **操作**: 断网后使用扩展
  - **期望**: 基础功能仍可使用，适当错误提示

- [ ] **TC1002**: 权限不足时
  - **操作**: 在chrome://页面使用
  - **期望**: 显示友好错误信息

- [ ] **TC1003**: 页面加载中使用
  - **操作**: 在页面未完全加载时打开popup
  - **期望**: 正确处理，不出现崩溃

---

## 🔄 兼容性测试

### 1. 浏览器版本兼容性

- [ ] **TC1101**: Chrome最新稳定版
- [ ] **TC1102**: Chrome Beta版本  
- [ ] **TC1103**: Chrome最低支持版本（Manifest V3支持的最低版本）

### 2. 操作系统兼容性

- [ ] **TC1201**: Windows 10/11
- [ ] **TC1202**: macOS (最新两个版本)
- [ ] **TC1203**: Linux (Ubuntu/其他主流发行版)

### 3. 网站兼容性

- [ ] **TC1301**: 主流网站测试
  - [ ] Google.com
  - [ ] GitHub.com  
  - [ ] YouTube.com
  - [ ] 百度.com

- [ ] **TC1302**: SPA单页应用
  - [ ] React应用
  - [ ] Vue应用
  - [ ] Angular应用

---

## 🧪 性能测试

### 1. 内存使用

- [ ] **TC1401**: 长时间运行内存监控
  - **操作**: 连续使用1小时
  - **期望**: 无明显内存泄露

### 2. 响应时间

- [ ] **TC1501**: popup打开时间 < 300ms
- [ ] **TC1502**: URL处理时间 < 100ms  
- [ ] **TC1503**: 二维码生成时间 < 500ms

---

## 📊 回归测试检查清单

### 每次发布前必检项目

- [ ] **基础功能**: TC101-TC109 (URL复制核心功能)
- [ ] **关键设置**: TC501-TC502, TC701-TC702
- [ ] **错误处理**: TC1001-TC1003
- [ ] **兼容性**: TC1101, TC1201-TC1203
- [ ] **性能基准**: TC1501-TC1503

---

## 📝 测试记录模板

### 测试执行记录

```
测试日期: ____年__月__日
测试人员: ____________
扩展版本: ____________
Chrome版本: __________
操作系统: ____________

通过的测试用例: ___/___
失败的测试用例: ___/___

主要问题:
1. ________________________
2. ________________________
3. ________________________

建议优先级:
□ 高优先级 (阻塞发布)
□ 中优先级 (下版本修复)  
□ 低优先级 (后续优化)
```

---

## 🔍 调试技巧

### 开发者工具使用

1. **popup调试**: 右键popup → 检查
2. **background调试**: chrome://extensions → 扩展详情 → 检查视图
3. **控制台错误**: 留意红色错误信息
4. **网络请求**: 检查失败的资源加载

### 常见问题排查

1. **通知不显示**: 检查浏览器通知权限
2. **快捷键不生效**: 检查快捷键冲突
3. **图标不显示**: 检查web_accessible_resources配置
4. **设置不保存**: 检查storage权限

---

## ✅ 测试完成标准

- [ ] 所有核心功能测试用例通过率 ≥ 95%
- [ ] 无阻塞性bug
- [ ] 无安全漏洞
- [ ] 性能指标达标
- [ ] 用户体验良好
- [ ] 错误处理完善

**测试完成后，请填写测试记录并提交测试报告。**